{% schema %}
{
  "name": "Custom Product Grid",
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Custom Product Grid",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<section class="custom-product-grid py-10 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {% for block in section.blocks %}
      {% assign product = block.settings.product | product %}
      {% if product %}
        <div class="product-card border rounded-lg overflow-hidden bg-white relative group">
          <a href="{{ product.url }}" class="block">
            <img src="{{ product.featured_image | img_url: 'medium' }}" 
                 alt="{{ product.title }}" 
                 class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105">
          </a>
          <div class="p-4">
            <h3 class="font-semibold text-lg">
              <a href="{{ product.url }}" class="hover:text-primary">{{ product.title }}</a>
            </h3>
            <p class="mt-1 text-gray-700 font-medium">{{ product.price | money }}</p>
          </div>
          <!-- Optional Modal Trigger -->
          <button type="button" class="absolute top-2 right-2 bg-white p-2 rounded-full shadow hover:bg-gray-100 open-modal" data-product-id="{{ product.id }}">
            +
          </button>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.open-modal').forEach(button => {
    button.addEventListener('click', function() {
      const productId = this.dataset.productId;
      // Load modal content dynamically (AJAX or Shopify Sections API)
      console.log('Open modal for product ID:', productId);
    });
  });
});
</script>

<style>
.custom-product-grid .product-card {
  transition: transform 0.3s;
}
.custom-product-grid .product-card:hover {
  transform: translateY(-5px);
}
</style>
